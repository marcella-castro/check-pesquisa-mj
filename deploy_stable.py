#!/usr/bin/env python3
"""
Deploy est√°vel com funcionalidade completa
"""

import os
import sys
from pathlib import Path

# Adicionar src ao path
current_dir = Path(__file__).parent
src_dir = current_dir / "src"
sys.path.insert(0, str(src_dir))

# Configura√ß√µes de produ√ß√£o
os.environ['DEBUG'] = 'False'
os.environ.setdefault('HOST', '0.0.0.0')
os.environ.setdefault('PORT', '8050')

if __name__ == "__main__":
    print("üöÄ Deploy est√°vel - vers√£o completa")
    
    try:
        from app_stable import app
        
        port = int(os.environ.get('PORT', 8050))
        host = os.environ.get('HOST', '0.0.0.0')
        
        print(f"‚úÖ Rodando em: {host}:{port}")
        print("‚úÖ Debug mode: OFF")
        print("‚úÖ Modo produ√ß√£o ativo")
        
        app.run_server(debug=False, host=host, port=port)
        
    except Exception as e:
        print(f"‚ùå Erro cr√≠tico: {e}")
        import traceback
        traceback.print_exc()
        sys.exit(1)
